<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>풀이수학</title>
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap.css" /> 
    <link rel="stylesheet" type="text/css" media="screen" href="css/common.css" />
  </head>

  <body>
  
  <header>
     
    <!---------- top area ---------->
    <!---------- top area ---------->
    <!---------- top area ---------->

    <nav class="pt-1 bg-light border-bottom">
      <div class="container d-flex flex-wrap">
            <!-- site move menu -->
            <ul class="nav me-auto mb-m1">
                <li class="nav-item"><a href="#"><img src="img/s_m_poolemath.png"></a></li>
                <li class="nav-item"><a href="#"><img src="img/s_m_pooleway.png"></a></li>
                <li class="nav-item"><a href="#"><img src="img/s_m_clog.png"></a></li>
            </ul>
            <!-- app link & favorits menu -->
            <ul class="nav">
                <li class="nav-item"><a href="#" class="link-dark fs-13p text-decoration-none pe-2"><img class="px-1" src="img/ic_store.svg"> 풀이수학 전용앱 다운로드</a></li>
                <li class="nav-item"><a href="#" class="link-dark fs-13p text-decoration-none"><img class="px-1" src="img/ic_favorite.svg"> 즐겨찾기</a></li>
            </ul>
        </div>
    </nav>

    <div class="border-bottom">
      <div class="container d-flex flex-wrap" style="height: 100px;">
        <!-- logo area -->
        <a href="/" class="d-flex align-items-center mb-3 mb-lg-0 me-lg-auto text-dark text-decoration-none">
            <img class="bi me-2" src="img/ic_logo.svg">
            <span class="fs-5">스마트 미래교육의 첫걸음</span>
        </a>
        <!-- GNB -->
        <ul class="nav me-5">
            <li class="nav-item"><a href="#" class="nav-link link-orange active">메인</a></li>
            <li class="nav-item"><a href="#" class="nav-link">풀이수학소개</a></li>
            <li class="nav-item"><a href="#" class="nav-link">공지사항</a></li>
            <li class="nav-item"><a href="#" class="nav-link">고객센터</a></li>
        </ul>
        <!-- login button group -->
        <div class="login-main">
            <button type="button" class="btn btn-outline-gray me-1">로그인</button>
            <button type="button" class="btn btn-orange">회원가입</button>
        </div>
      </div>
    </div>
    
  </header>


  <main role="main">

  <!---------- Join ---------->
  <!---------- Join ---------->
  <!---------- Join ---------->

  <div class="join">
    <div class="container text-center" style="width: 800px;">
      <sapn class="title"><span class="main-blue">풀이</span><span class="main-orange">수학</span> 회원가입</sapn><br>
      지금 풀이수학에 가입하고 문제은행 서비스를 이용해보세요.
      <div class="title-default">
        기본정보 <span class="main-orange">*</span><span class="guide">아래사항은 필수입력사항입니다.</span>
      </div>
      <div class="row title-sub">
        
        <div class="col-md-3 mt-1">이메일</div>
        <div class="col-md-9"><input type="email" class="form-control-join" id="id-t" name="__Id" autocomplete="email" placeholder="로그인 아이디로 사용됩니다.">
          <input type="hidden" id="CheckID" name="CheckID" value="none">
          <input type="button" id="id-c" value="중복체크" class="btn btn-orange" style="display: none; margin-left: 4px;" onclick="joinCheck()">
        </div>  
        <div class="col-md-3 mt-1"></div><div class="col-md-9"><p id="id-text"></p></div>

        <div class="col-md-3 mt-1">비밀번호</div>
        <div class="col-md-9"><input type="password" class="form-control-join" id="pw-t" name="__Password" autocomplete="new-password"></div>  
        <div class="col-md-3 mt-1"></div><div class="col-md-9"><p id="pw-text"></p></div>
        
        <div class="col-md-3 mt-1">비밀번호확인</div>
        <div class="col-md-9"><input type="password" class="form-control-join"  id="pw-t1" name="__Password1" autocomplete="new-password"></div>
        <div class="col-md-3 mt-1"></div><div class="col-md-9"><p id="pw-text1"></p></div>
        
        <div class="col-md-3 mt-1">이름</div>
        <div class="col-md-9"><input type="text" class="form-control-join" id="name-t" name="__Name" maxlength="10" autocomplete="name"></div>
        <div class="col-md-3 mt-1"></div><div class="col-md-9"><p id="name-text"></p></div>
        
        <div class="col-md-3 mt-1">닉네임</div>
        <div class="col-md-9"><input type="text" class="form-control-join" id="nickname-t" name="__Nickname" placeholder="문제지에 출력되는 이름입니다." autocomplete="nickname"></div>
        <div class="col-md-3 mt-1"></div><div class="col-md-9"><p id="nickname-text"></p></div>
        
      </div>

      <div class="agree">
        <p>가입과 동시에 귀하는 풀이수학의 
          <a class="join" onclick="windowOpen('terms-service')" style="color: #1e88e5;">이용약관</a> 
          및<a class="join" onclick="windowOpen('terms-privacy')" style="color: #1e88e5;">개인정보 취급방침</a>
          에 동의한 것으로 간주합니다.</p>
          <input type="button" value="나가기" class="btn btn-secondary">
          <input type="submit" id="join-i" name="join" value="동의하고 가입하기" class="btn btn-orange">
      </div>
      
    </div>
  </div>


</main>

<footer class="foot">
    <div class="fnb">
        <div class="container">
        <a href="#" class="menu">풀이수학소개</a>
        <a href="#" class="menu">서비스이용약관</span></a>
        <a href="#" class="menu">개인정보처리방침</span></a>
        <a href="#" class="menu">고객센터</span></a>
        </div>
    </div>
    <div class="container">
        <div class="row mt-4" style="height: 140px;">
        <div class="col-lg-9">
            <img src="img/img_logo_footer_poolelearning.png"> <img src="img/img_logo_footer_poolway.png"><br><br>
            <span class="cp-name">주식회사 풀이러닝  | 주식회사 풀이웨이</span>사업자등록번호 292-81-00194 | 대표이사 박우주 | 통신판매신고 제2018-서울강서-0396호<br>
            서울특별시 강서구 마곡서로 158 마곡센트럴타워 2차 199호  TEL. 02ㆍ2664ㆍ2004  FAX. 02ㆍ2664ㆍ2331  E-mail. cs@poole.co.kr<br>
            <span class="copyright">COPYRIGHT (C) 2021 Pool e-learning.CO,.LTD. ALL RIGHT RESERVED.</span>
            <a href="https://www.facebook.com/Dreamize.ko/" target="blank"><span class="sns"><img src="img/ic_sns_f.png"></span></a>
            <a href="https://twitter.com/dreamize_" target="blank"><span class="sns"><img src="img/ic_sns_i.png"></span></a></p>
        </div>
        <div class="col-lg-3 mt-2">
            <div>
            <select class="form-select-family" aria-label="Default select example">
                <option selected>Family Site</option>
                <option value="1">천재교육</option>
                <option value="2">해법에듀 스마트해법수학</option>
                <option value="3">No.1 과외플랫폼 김과외</option>
                <option value="4">애슐런러닝</option>
                <option value="5">나래트렌드</option>
            </select>
            </div>
            <button class="btn-go-login">풀이수학 문제은행 서비스 바로가기</button>
        </div>
        </div>
    </div>
</footer>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script>window.jQuery || document.write('<script src="js/vendor/jquery.slim.min.js"><\/script>')</script><script src="js/bootstrap.bundle.js"></script>
  <script src='https://code.jquery.com/jquery-2.2.4.min.js'></script>
  <script type="text/javascript">

    var _ID = 0;
    var _PW = 0;
    var _NAME = 0;
    var _NICKNAME = 0;
    $(function(){
      display();
      $("#join-i").attr("disabled","disabled");
      $("#id-t").keyup(function(){
        var mailChk = /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i
        if (!mailChk.test($("#id-t").val())) {
          $("#id-text").html("이메일 형식이 올바르지 않습니다.");
          $("#id-c").css("display","none");
          _ID = 0;
        } else {
          $("#id-text").html("");
          $("#id-c").css("display","");
          _ID = 1;
        }
        display();
      });
      $("#pw-t, #pw-t1").keyup(function(){
        var pwLength = $("#pw-t").val().length
        var password = $("#pw-t").val()
        var password1 = $("#pw-t1").val()
        if($("#id-t").val() == ""){//
          $("#id-text").html("이메일을 입력하세요")
        }
        if(!(pwLength>=6)&&(pwLength<=15)){
          _PW = 0
          $("#pw-text").html("비밀번호는 6~15이내로 입력하셔야 합니다.")
        }else{
          _PW = 1
          $("#pw-text").html("")
        }
        if(password1 != ""){
          if(password1 != password){
            _PW = 0
            $("#pw-text1").html("비밀번호가 일치하지 않습니다.")
          }else{
            _PW = 1
            $("#pw-text1").html("")
          }
        }
        if($("#pw-t1").val() != password){
          _PW = 0
          $("#pw-text1").html("비밀번호가 일치하지 않습니다.")
        }else{
          _PW = 1
          $("#pw-text1").html("")
        }
        if($("#pw-t1").val() == ""){
          _PW = 0
          $("#pw-text1").html("비밀번호가 일치하지 않습니다.")
        }
        display()
      });
      $("#name-t").keyup(function(){
        var num=/^[0-9]*$/
        var regExp = /[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi
        if($("#name-t").val() == ""){
          $("#name-text").html("이름을 정확히 입력하세요.")
          _NAME = 0
        }else{
          if((regExp.test($("#name-t").val()))||(num.test($("#name-t").val()))){
            $("#name-text").html("이름을 정확히 입력하세요.")
            _NAME = 0
          }else{
            $("#name-text").html("")
            _NAME = 1
          } 
        }
        display();
      })
      $("#nickname-t").keyup(function(){
        var num=/^[0-9]*$/
        var regExp = /[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi
        if($("#nickname-t").val() == ""){
          $("#nickname-text").html("닉네임을 정확히 입력하세요;")
          _NICKNAME = 0
        }else{
          if((regExp.test($("#nickname-t").val()))||(num.test($("#nickname-t").val()))){
            $("#nickname-text").html("닉네임을 정확히 입력하세요.")
            _NICKNAME = 0
          }else{
            $("#nickname-text").html("")
            _NICKNAME = 1
          } 
        }
        display()
      })

      var mutex = false;
      $("#join-i").click(function(e){
        if (mutex) {
          alert('회원가입 요청을 처리중입니다.\n잠시만 기다려주세요');
          return false;
        }
        mutex = true;
        if($("#CheckID").val()=="none"){
          mutex = false;
          alert("아이디 중복체크 해주세요.")
          return false;
        }
        e.preventDefault()
        var rawid = $('input[name="__Id"]').val()
        var rawpw = $('input[name="__Password"]').val()
        var rawname = $('input[name="__Name"]').val()
        var rawnickname = $('input[name="__Nickname"]').val()
      
        $('input[name="ID"]').val(rawid)
        $('input[name="PW"]').val(rawpw)
        $('input[name="Name"]').val(rawname)
        $('input[name="NickName"]').val(rawnickname)
        
        $.ajax({
          url   : 'https://www.poolemath.com/api/v1/auth/register/instructor',
          type  : 'POST',
          json  : true,
          data  :  $("#hidden-form").serialize(),
          success : function (data) {
            mutex = false;
            location.href = "/register/complete"
          },
          error   : function () {
            mutex = false;
            alert("회원 등록에 실패하였습니다.\n잠시 후에 다시 시도해주세요.");
          }
        });
        
        return false;
      })
    })

    function display(){
      var nn = _ID+_PW+_NAME+_NICKNAME
      if(nn==4){
        $("#join-i").attr("disabled",false)
      }else{ 
        $("#join-i").attr("disabled",true)
      }
    }

    function windowOpen(data){
      window.open("https://www.poolemath.com/register/"+data,"fullscreen=yes")
    }

    function joinCheck(){
      $.ajax({
        url : 'https://www.poolemath.com/api/v1/auth/register/idCheck',
        type    : 'POST',
        dataType : 'json',
        json : true,
        data : {CheckID : $("#id-t").val()},
        success : function(data){
          console.log(data)
          if(data.IsUnique == true){
            alert("사용할수 있는 아이디 입니다.")
            $("#CheckID").val('ok')
          }else{
            alert("이미 사용중인 아이디입니다.")
            $("#CheckID").val('none')
            $("#id-t").val("")
            $("#id-t").focus()
            $("#id-c").css("display","none")
          }
        },
        error   : function(){
                    alert("오류")
            } 
      })
    }


    </script>
</body>
</html>
